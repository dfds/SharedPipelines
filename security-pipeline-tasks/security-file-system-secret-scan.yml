parameters:
- name: Directory
  type: string

steps:
- script: |
    docker run -it -v "${{ parameters.sourceDirectory }}:/pwd" zricethezav/gitleaks:latest detect --no-git --source="/pwd" --report-format sarif --report-path "/pwd/report.json"
  displayName: 'Run File System Scan'
  condition: succeededOrFailed()